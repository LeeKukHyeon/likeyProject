<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ks44team03.user.mapper.CommunityMapper">
	
	<!-- 커뮤니티 -->
	<resultMap type="Community" id="communityResultMap">
		<id column="cm_num" property="communityNum"/>
		<result column="id" property="communityId"/>
		<result column="cm_title" property="communityTitle"/>
		<result column="cm_content" property="communityContent"/>
		<result column="cm_img" property="communityImg"/>
		<result column="cm_date" property="communityDate"/>
		<result column="cm_comment" property="communityComment"/>
		<result column="cm_comment_date" property="communityCommentDate"/>
		<result column="cm_view" property="communityView"/>	
		<result column="community_cate" property="communityView"/>	
	</resultMap>
	
	<!-- 이용후기 등록 -->
	<insert id="addReview" parameterType="Community">
		/* 이용후기 등록 */
		INSERT INTO community
		(
		 cm_num
		,cm_title
		,cm_content
		,cm_img
		,cm_date
		,community_cate
		)
		VALUES
		(#{communityNum}, #{communityTitle}, #{communityContent}, #{communityImg}, CURDATE(), '이용후기');
	</insert>
	
	<!-- 이용후기 목록 조회 -->
	<select id="getReviewList" resultMap="communityResultMap">
		/* 이용후기 목록 조회 */
		SELECT
		   cm_num
		  ,id
		  ,cm_title
		  ,cm_view
		  ,cm_comment_date
		FROM
			community
		WHERE 
			community_cate = '이용후기';
	</select>
	
	<!-- 이용후기 상세정보 -->
	<select id="getReviewInfo" resultMap="communityResultMap">
		/* 이용후기 상세정보 */	
		SELECT
			 cm_num
			,cm_title
			,cm_content
			,cm_date
		FROM
			community
		WHERE
			cm_num = #{communityNum};
	</select>
</mapper>